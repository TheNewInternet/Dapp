(this["webpackJsonpdapp-instachain"]=this["webpackJsonpdapp-instachain"]||[]).push([[0],{108:function(e,t,n){"use strict";var a=n(62);t.a=new a.a.eth.Contract([{anonymous:!1,inputs:[],name:"NewPost",type:"event"},{inputs:[],name:"getCounter",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_index",type:"uint256"}],name:"getHash",outputs:[{internalType:"string",name:"img",type:"string"},{internalType:"string",name:"text",type:"string"},{internalType:"string",name:"fileType",type:"string"},{internalType:"address",name:"owner",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"_img",type:"string"},{internalType:"string",name:"_text",type:"string"},{internalType:"string",name:"_type",type:"string"}],name:"sendHash",outputs:[],stateMutability:"nonpayable",type:"function"}],"0xAB3037FE6276284a5Dfed69Fe9d0A043Bf2Fa43F")},1136:function(e,t){},1137:function(e,t,n){},1138:function(e,t,n){},1139:function(e,t,n){},1140:function(e,t,n){"use strict";n.r(t);var a=n(8),c=n.n(a),r=n(419),s=n.n(r),o=(n(433),n(129)),i=n(26),u=(n(434),n(3)),l=function(){return Object(u.jsx)(u.Fragment,{children:Object(u.jsxs)("nav",{className:"navbar-item",children:[Object(u.jsx)(o.b,{to:"/",className:"navbar-logo",children:Object(u.jsxs)("div",{className:"logo",children:[Object(u.jsx)("i",{className:"fab fa-ethereum"}),"Instachain"]})}),Object(u.jsx)("div",{children:Object(u.jsx)(o.b,{to:"/Feeds",className:"menu-icon",children:"Feeds"})})]})})},f=(n(443),n(425),n(422),n(444),n(445),n(446),n(447),n(44)),p=function(){return Object(u.jsxs)("div",{className:"home-index",children:["About",Object(u.jsx)("h1",{children:"Instagram on blockchain"}),Object(u.jsx)("h5",{children:"This project is still working in progress."}),Object(u.jsx)("h5",{children:"Use it at your own risk."}),Object(u.jsxs)("button",{type:"button",className:"btn btn-xss btn-soft-light text-nowrap d-flex align-items-center mr-2",onClick:function(){Object(f.a)()},children:[Object(u.jsx)("img",{className:"mr-1",width:"15",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/36/MetaMask_Fox.svg/2048px-MetaMask_Fox.svg.png",alt:"Metamask"})," Add Instachain Network"]})]})},d=(n(1136),n(21)),h=n.n(d),b=n(39),m=(n(1137),n(9)),j=n(11),x=n(107),g=n(17),O=n(16),v=(n(1138),function(e){Object(g.a)(n,e);var t=Object(O.a)(n);function n(e){var a;return Object(m.a)(this,n),(a=t.call(this,e)).handleCaptionChange=a.handleCaptionChange.bind(Object(x.a)(a)),a.handlePhotoChange=a.handlePhotoChange.bind(Object(x.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(x.a)(a)),a}return Object(j.a)(n,[{key:"handleCaptionChange",value:function(e){Object(f.b)(e.target.value)}},{key:"handlePhotoChange",value:function(e){console.log(e.target.files[0]),Object(f.c)(e.target.files[0]),Object(f.d)(e.target.files[0].type)}},{key:"handleSubmit",value:function(e){e.preventDefault(),Object(f.g)()}},{key:"render",value:function(){return Object(u.jsxs)("form",{onSubmit:this.handleSubmit,className:"post-index",children:[Object(u.jsxs)("label",{className:"post-item",children:[Object(u.jsx)("i",{className:"fas fa-pen post-item-title"}),Object(u.jsx)("textarea",{id:"caption",name:"caption",className:"post-textarea",onChange:this.handleCaptionChange})]}),Object(u.jsx)("label",{htmlFor:"upload-input",className:"post-textarea",children:Object(u.jsx)("i",{className:"fas fa-folder-open fa-2x folder-icon",id:"fasfo"})}),Object(u.jsx)("br",{}),Object(u.jsx)("input",{type:"submit",value:"Submit",className:"post-submit-btn"}),Object(u.jsx)("div",{className:"folder",children:Object(u.jsx)("input",{type:"file",id:"upload-input",accept:".jpg,.jpeg,.gif,.png,.mov,.mp4",onChange:this.handlePhotoChange,hidden:!0})})]})}}]),n}(c.a.Component)),y=(n(1139),n(1142));function w(e){var t=e.posts.map((function(e){return Object(u.jsxs)("div",{className:"blog-index",children:[e.fileType.startsWith("video")?Object(u.jsx)("video",{src:e.src,alt:"",className:"blog-index-img",controls:!0}):Object(u.jsx)("img",{src:e.src,alt:"",className:"blog-index-img"}),Object(u.jsx)("div",{className:"blog-index-img-border",children:Object(u.jsx)("div",{className:"blog-index-item",children:e.caption})})]},Object(y.a)())}));return Object(u.jsx)("div",{children:t})}var k=[],N=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.f)();case 2:k=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();N();var C=function(){return Object(u.jsxs)("div",{className:"feed-index",children:[Object(u.jsx)(v,{}),Object(u.jsx)(w,{posts:k})]})},T=function(){var e=Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Object(f.e)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();T();var F=function(){return Object(u.jsx)("div",{className:"social-index",children:Object(u.jsx)(C,{})})};var S=function(){return Object(u.jsxs)(o.a,{children:[Object(u.jsx)(l,{}),Object(u.jsxs)(i.c,{children:[Object(u.jsx)(i.a,{path:"/",exact:!0,component:p}),Object(u.jsx)(i.a,{path:"/Feeds",exact:!0,component:F})]})]})};s.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))},166:function(e,t,n){"use strict";var a=n(424),c=new(n.n(a).a)({host:"infura-ipfs.io",protocol:"https"});t.a=c},229:function(e,t){},422:function(e,t){},433:function(e,t,n){},434:function(e,t,n){},44:function(e,t,n){"use strict";(function(e){n.d(t,"f",(function(){return k})),n.d(t,"g",(function(){return y})),n.d(t,"c",(function(){return j})),n.d(t,"d",(function(){return x})),n.d(t,"b",(function(){return g})),n.d(t,"e",(function(){return w})),n.d(t,"a",(function(){return N}));var a=n(21),c=n.n(a),r=n(39),s=n(62),o=n(166),i=n(108),u=n(1142),l="",f="",p="",d="",h=!1,b=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.localStorage.getItem("account");case 2:if(void 0===(l=e.sent)||""===l||null===l){e.next=9;break}return e.next=6,window.localStorage.getItem("account");case 6:l=e.sent,e.next=14;break;case 9:return e.next=11,s.a.eth.personal.newAccount("");case 11:return l=e.sent,e.next=14,window.localStorage.setItem("account",l);case 14:return console.log("account: ".concat(l)),e.next=17,s.a.eth.getBalance(l);case 17:t=e.sent,console.log("balance: ".concat(t));case 19:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return e.next=4,s.a.eth.personal.unlockAccount(l,"",0);case 4:return e.next=6,s.a.eth.getGasPrice().then((function(e){console.log(s.a.utils.fromWei(e,"ether"))}));case 6:case"end":return e.stop()}}),e)})))();var m,j=function(e){var t=new FileReader;"undefined"!==typeof e?(t.readAsArrayBuffer(e),t.onloadend=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t.result);case 2:f=e.sent;case 3:case"end":return e.stop()}}),e)})))):f=""},x=function(e){d=e},g=function(e){p=e},O=function(){var t=Object(r.a)(c.a.mark((function t(n){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.from(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,a,r,s,u,b;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return alert("Uploading on IPFS..."),console.log(h),h=!0,e.next=5,o.a.add(f).then((function(e){t=e[0].hash,console.log(t)}));case 5:return e.next=7,O(p);case 7:return n=e.sent,e.next=10,o.a.add(n);case 10:return a=e.sent,r=a[0].hash,console.log("fileType: ".concat(d)),e.next=15,O(d);case 15:return s=e.sent,console.log("bufferType: ".concat(s)),e.next=19,o.a.add(s);case 19:return u=e.sent,b=u[0].hash,console.log("typeHash: ".concat(b)),console.log(h),console.log(typeof b),console.log(l),e.next=27,i.a.methods.sendHash(t,r,b).send({from:l},(function(e,t){console.log("transactionHash: ".concat(t)),"undefined"!==typeof t&&(alert("Storing on Ethereum..."),i.a.once("NewPost",{from:l},(function(){k(),alert("Operation Finished! Refetching...")}))),h=!1}));case 27:console.log(h);case 28:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){f&&p?v():alert("Please fill in the media and caption.")},w=function(){var e=Object(r.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,a,r,s,o,f,p,d,b,m,j;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(i.a.options.address),h=!1,t=[],e.next=5,i.a.methods.getCounter().call({from:l});case 5:if(n=e.sent,console.log(n),null===n){e.next=25;break}for(a=[],r=[],s=[],o=n;o>=1;o-=1)a.push(i.a.methods.getHash(o).call({from:l}));return e.next=14,Promise.all(a);case 14:for(f=e.sent,p=0;p<f.length;p+=1)r.push(fetch("https://ipfs.io/ipfs/".concat(f[p].text)).then((function(e){return e.text()})));for(d=0;d<f.length;d+=1)s.push(fetch("https://ipfs.io/ipfs/".concat(f[d].fileType)).then((function(e){return e.text()})));return e.next=19,Promise.all(r);case 19:return b=e.sent,e.next=22,Promise.all(s);case 22:for(m=e.sent,j=0;j<f.length;j+=1)t.push({id:j,key:"key-".concat(Object(u.a)()),caption:b[j],fileType:m[j],src:"https://ipfs.io/ipfs/".concat(f[j].img)});h=!1;case 25:return e.abrupt("return",t);case 26:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function N(){return C.apply(this,arguments)}function C(){return C=Object(r.a)(c.a.mark((function e(){var t,n,a=arguments;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>0&&void 0!==a[0]?a[0]:"web3","undefined"===typeof(m=s.a.eth)){e.next=23;break}return t=0,e.t0=console,e.next=7,m.net.getId();case 7:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.next=11,m.net.getId();case 11:if(t=e.sent,"9901"!=t.toString()){e.next=19;break}return alert("Instachain Network has already been added to Metamask."),e.abrupt("return");case 19:n=[{chainId:"0x26AD",chainName:"Instachain",rpcUrls:["http://66.228.52.222:8545"]}];case 20:window.ethereum.request({method:"wallet_addEthereumChain",params:n}).then((function(){return console.log("Success")})).catch((function(e){return console.log("Error",e.message)})),e.next=24;break;case 23:alert("Unable to locate a compatible web3 browser!");case 24:case"end":return e.stop()}}),e)}))),C.apply(this,arguments)}}).call(this,n(0).Buffer)},443:function(e,t,n){},444:function(e,t,n){},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){},461:function(e,t){},463:function(e,t){},465:function(e,t){},469:function(e,t){},495:function(e,t){},497:function(e,t){},510:function(e,t){},512:function(e,t){},542:function(e,t){},544:function(e,t){},62:function(e,t,n){"use strict";var a=new(n(450))("http://66.228.52.222:8545");t.a=a},628:function(e,t){},629:function(e,t){},754:function(e,t){},755:function(e,t){},770:function(e,t){},772:function(e,t){},775:function(e,t){},785:function(e,t){},787:function(e,t){},829:function(e,t){},834:function(e,t){},836:function(e,t){},842:function(e,t){},844:function(e,t){},949:function(e,t){}},[[1140,1,2]]]);
//# sourceMappingURL=main.3d53acd8.chunk.js.map